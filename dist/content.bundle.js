/*! For license information please see content.bundle.js.LICENSE.txt */
(()=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(n,e){var o="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!o){if(Array.isArray(n)||(o=t(n))||e&&n&&"number"==typeof n.length){o&&(n=o);var r=0,a=function(){};return{s:a,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(n){throw n},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,s=!1;return{s:function(){o=o.call(n)},n:function(){var n=o.next();return i=n.done,n},e:function(n){s=!0,c=n},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw c}}}}function t(n,e){if(n){if("string"==typeof n)return o(n,e);var t={}.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(n,e):void 0}}function o(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function r(){"use strict";r=function(){return t};var e,t={},o=Object.prototype,a=o.hasOwnProperty,c=Object.defineProperty||function(n,e,t){n[e]=t.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(n,e,t){return Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}),n[e]}try{d({},"")}catch(e){d=function(n,e,t){return n[e]=t}}function m(n,e,t,o){var r=e&&e.prototype instanceof _?e:_,a=Object.create(r.prototype),i=new N(o||[]);return c(a,"_invoke",{value:I(n,t,i)}),a}function b(n,e,t){try{return{type:"normal",arg:n.call(e,t)}}catch(n){return{type:"throw",arg:n}}}t.wrap=m;var g="suspendedStart",f="suspendedYield",h="executing",p="completed",v={};function _(){}function y(){}function k(){}var w={};d(w,s,(function(){return this}));var E=Object.getPrototypeOf,x=E&&E(E(R([])));x&&x!==o&&a.call(x,s)&&(w=x);var S=k.prototype=_.prototype=Object.create(w);function A(n){["next","throw","return"].forEach((function(e){d(n,e,(function(n){return this._invoke(e,n)}))}))}function T(e,t){function o(r,c,i,s){var l=b(e[r],e,c);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==n(d)&&a.call(d,"__await")?t.resolve(d.__await).then((function(n){o("next",n,i,s)}),(function(n){o("throw",n,i,s)})):t.resolve(d).then((function(n){u.value=n,i(u)}),(function(n){return o("throw",n,i,s)}))}s(l.arg)}var r;c(this,"_invoke",{value:function(n,e){function a(){return new t((function(t,r){o(n,e,t,r)}))}return r=r?r.then(a,a):a()}})}function I(n,t,o){var r=g;return function(a,c){if(r===h)throw Error("Generator is already running");if(r===p){if("throw"===a)throw c;return{value:e,done:!0}}for(o.method=a,o.arg=c;;){var i=o.delegate;if(i){var s=z(i,o);if(s){if(s===v)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(r===g)throw r=p,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);r=h;var l=b(n,t,o);if("normal"===l.type){if(r=o.done?p:f,l.arg===v)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(r=p,o.method="throw",o.arg=l.arg)}}}function z(n,t){var o=t.method,r=n.iterator[o];if(r===e)return t.delegate=null,"throw"===o&&n.iterator.return&&(t.method="return",t.arg=e,z(n,t),"throw"===t.method)||"return"!==o&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var a=b(r,n.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var c=a.arg;return c?c.done?(t[n.resultName]=c.value,t.next=n.nextLoc,"return"!==t.method&&(t.method="next",t.arg=e),t.delegate=null,v):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function C(n){var e={tryLoc:n[0]};1 in n&&(e.catchLoc=n[1]),2 in n&&(e.finallyLoc=n[2],e.afterLoc=n[3]),this.tryEntries.push(e)}function L(n){var e=n.completion||{};e.type="normal",delete e.arg,n.completion=e}function N(n){this.tryEntries=[{tryLoc:"root"}],n.forEach(C,this),this.reset(!0)}function R(t){if(t||""===t){var o=t[s];if(o)return o.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,c=function n(){for(;++r<t.length;)if(a.call(t,r))return n.value=t[r],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(n(t)+" is not iterable")}return y.prototype=k,c(S,"constructor",{value:k,configurable:!0}),c(k,"constructor",{value:y,configurable:!0}),y.displayName=d(k,u,"GeneratorFunction"),t.isGeneratorFunction=function(n){var e="function"==typeof n&&n.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,k):(n.__proto__=k,d(n,u,"GeneratorFunction")),n.prototype=Object.create(S),n},t.awrap=function(n){return{__await:n}},A(T.prototype),d(T.prototype,l,(function(){return this})),t.AsyncIterator=T,t.async=function(n,e,o,r,a){void 0===a&&(a=Promise);var c=new T(m(n,e,o,r),a);return t.isGeneratorFunction(e)?c:c.next().then((function(n){return n.done?n.value:c.next()}))},A(S),d(S,u,"Generator"),d(S,s,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(n){var e=Object(n),t=[];for(var o in e)t.push(o);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},t.values=R,N.prototype={constructor:N,reset:function(n){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(L),!n)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=e)},stop:function(){this.done=!0;var n=this.tryEntries[0].completion;if("throw"===n.type)throw n.arg;return this.rval},dispatchException:function(n){if(this.done)throw n;var t=this;function o(o,r){return i.type="throw",i.arg=n,t.next=o,r&&(t.method="next",t.arg=e),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],i=c.completion;if("root"===c.tryLoc)return o("end");if(c.tryLoc<=this.prev){var s=a.call(c,"catchLoc"),l=a.call(c,"finallyLoc");if(s&&l){if(this.prev<c.catchLoc)return o(c.catchLoc,!0);if(this.prev<c.finallyLoc)return o(c.finallyLoc)}else if(s){if(this.prev<c.catchLoc)return o(c.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return o(c.finallyLoc)}}}},abrupt:function(n,e){for(var t=this.tryEntries.length-1;t>=0;--t){var o=this.tryEntries[t];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===n||"continue"===n)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var c=r?r.completion:{};return c.type=n,c.arg=e,r?(this.method="next",this.next=r.finallyLoc,v):this.complete(c)},complete:function(n,e){if("throw"===n.type)throw n.arg;return"break"===n.type||"continue"===n.type?this.next=n.arg:"return"===n.type?(this.rval=this.arg=n.arg,this.method="return",this.next="end"):"normal"===n.type&&e&&(this.next=e),v},finish:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.finallyLoc===n)return this.complete(t.completion,t.afterLoc),L(t),v}},catch:function(n){for(var e=this.tryEntries.length-1;e>=0;--e){var t=this.tryEntries[e];if(t.tryLoc===n){var o=t.completion;if("throw"===o.type){var r=o.arg;L(t)}return r}}throw Error("illegal catch attempt")},delegateYield:function(n,t,o){return this.delegate={iterator:R(n),resultName:t,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function a(n,e,t,o,r,a,c){try{var i=n[a](c),s=i.value}catch(n){return void t(n)}i.done?e(s):Promise.resolve(s).then(o,r)}function c(n){return function(){var e=this,t=arguments;return new Promise((function(o,r){var c=n.apply(e,t);function i(n){a(c,o,r,i,s,"next",n)}function s(n){a(c,o,r,i,s,"throw",n)}i(void 0)}))}}setTimeout((function(){$("#container.WEB").stop(!0,!0),$("#frameMain_th").stop(!0,!0);var n=$("#frameMain_th").width();console.log("width",n),0==n&&($("#container.WEB").animate({width:"54%"},"slow"),$("#frameMain_th").animate({width:"45%"},"fast",(function(){document.getElementById("frameMain_th").style.setProperty("width","45%","important")})),$("#frameMain_th").animate({right:"0"},"slow"),chrome.runtime.sendMessage({message:"getActiveTab"},(function(n){chrome.runtime.lastError?console.error(chrome.runtime.lastError.message):n.tab?(console.log("Active tab info:",n.tab),chrome.storage.local.set({tabZalo:n.tab},(function(){chrome.runtime.lastError?console.error(chrome.runtime.lastError.message):console.log("Active tab data saved:",n.tab)}))):console.log("No active tab found")})))}),1500);var i=document.createElement("iframe");function s(n){var e=document.querySelector("style[data-zl-modal-style]");console.log("style[data-zl-modal-style]",e),e||((e=document.createElement("style")).setAttribute("data-zl-modal-style",""),document.head.appendChild(e)),e.textContent=n?".zl-modal { display: none !important; }":".zl-modal { display: block !important; }"}function l(n){return new Promise((function(e){return setTimeout(e,n)}))}function u(){return(u=c(r().mark((function n(e,t,o){var a,c;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("clickInputfriend",e,t,o),!(a=document.getElementById("contact-search-input"))){n.next=10;break}return a.value=e,c=new Event("input",{bubbles:!0}),a.dispatchEvent(c),n.next=8,l(1e3);case 8:new MutationObserver((function(n,e){var r=o.startsWith("g")?"group-item-":"friend-item-",a="".concat(r).concat(o),c=document.getElementById(a);if(c)c.click(),e.disconnect(),setTimeout((function(){chrome.runtime.sendMessage({task:"OPEN_CHAT_SUCCESS"})}),1e3),setTimeout((function(){m(t,o,"BAN_BE")}),2e3);else{var i={status:"error",phone:o,message:"Không tìm thấy thông tin bạn bè."};chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:i})}})).observe(document,{childList:!0,subtree:!0});case 10:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function d(n,e,t,o,r){var a,c=document.querySelector('[data-id="btn_Main_AddFrd_Search"]');c?(c.click(),a=function(){var a=document.querySelector(".error__msg");if(a){var c=a.textContent,i={status:"block",phone:n,message:c};chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:i})}else o?function(n,e){var t=document.querySelector('[data-translate-inner="STR_PROFILE_ADD_FRIEND"]');if(console.log("ketban button: ",t),t)t.click(),setTimeout((function(){chrome.runtime.sendMessage({task:"OPEN_CHAT_SUCCESS"})}),1e3),setTimeout((function(){!function(n,e){if(""!==n){var t=document.querySelector('[data-translate-placeholder="STR_PROFILE_ENTER_GREETING"]');if(t){console.log("richInput kết bạn:",t),t.value=n,t.placeholder="",t.contentEditable="true",t.classList.remove("empty");var o=new Event("input",{bubbles:!0,cancelable:!0});t.dispatchEvent(o)}else console.log("richInput not found")}var r=document.querySelector('[data-translate-inner="STR_PROFILE_ADD_FRIEND"]');if(console.log("GỞI KẾT BẠN  button",r),r){var a=document.querySelector(".pi-mini-info-section__name").textContent;console.log("Thông tin kết bạn, ",a);var c={status:"ok",phone:e,type:"KHACH_HANG",message:"Đã gửi kết bạn đến: ".concat(a)};chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:c}),r.click()}else console.log("not found GỞI KẾT BẠN button")}(e,n)}),2e3);else{if(document.querySelector('[data-translate-inner="STR_UNDO_REQUEST"]')){console.log("Số điện thoại đã gởi kết bạn.");var o={status:"error",phone:n,message:"Số điện thoại này đã gởi kết bạn trước đó."}}else if(document.querySelector('[data-translate-inner="STR_CHAT"]'))console.log("Số điện thoại này đã là bạn bè."),o={status:"ok",phone:n,message:"Số điện thoại này đã là bạn bè."};else{console.log("Lỗi, Số điện thoại này chặn kết bạn.");o={status:"error",phone:n,message:"Lỗi, Số điện thoại này chặn kết bạn."}}chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:o});var r=document.querySelector('[data-id="btn_Main_AddFrd"]');r&&r.click()}}(n,e):function(n,e,t,o){var r=document.querySelector('[data-translate-inner="STR_CHAT"]');if(console.log("startchat button: ",r),console.log("IS CHECK",t),r){if(t){var a=document.querySelector(".pi-mini-info-section__name").textContent,c={status:"ok",phone:{phone:n,username:a},message:"OK"};chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:c});var i=document.querySelector('[data-id="btn_Main_AddFrd"]');return void(i&&i.click())}r.click(),setTimeout((function(){chrome.runtime.sendMessage({task:"OPEN_CHAT_SUCCESS"})}),1e3),setTimeout((function(){m(e,n,"KHACH_HANG",o)}),2e3)}else{console.log("Số điện thoại này chưa đăng ký tài khoản hoặc không cho phép tìm kiếm."),c={status:"error",phone:n,message:"Số điện thoại này chưa đăng ký tài khoản hoặc không cho phép tìm kiếm."},chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:c});var s=document.querySelector('[data-id="btn_Main_AddFrd"]');s&&s.click()}}(n,e,t,r)},setTimeout(a,1e3)):console.error("Search Button not found")}function m(n,e,t,o){var r=document.getElementById("richInput");console.log("richInput:",r),console.log("item phatcode test:",o),console.log("message first:",n),r.placeholder="",r.contentEditable="true",r.classList.remove("empty"),chrome.storage.local.get(["IS_PHAT_CODE"],(function(a){var c=a.IS_PHAT_CODE;1==c&&(n=o[1]),console.log("IS_PHAT_CODE contentjs:",c),console.log("message after:",n),r.textContent="";var i=b(n);r.innerHTML=i;var s=new Event("input",{bubbles:!0,cancelable:!0});r.dispatchEvent(s);var l=document.querySelector('[data-translate-title="STR_SEND"]');if(console.log("send button",l),l){var u=document.querySelector(".header-title").textContent;if(console.log("username Login",u),"BAN_BE"===t){var d={status:"ok",phone:e,type:t,message:"Đã gửi tin nhắn đến: ".concat(u)};chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:d}),l.click()}else"KHACH_HANG"==t&&(d={status:"ok",phone:e,type:t,message:"Đã gửi tin nhắn đến: ".concat(u)},chrome.runtime.sendMessage({task:"TRANGTHAI_SEND_MESSAGE",data:d}),l.click())}else console.log("not found send button")}))}function b(n){var e=n.split("\n"),t="";return e.forEach((function(n,e){t+='<div id="input_line_'.concat(e,'"><span class="" data-mention="').concat(n,'" id="input_part_').concat(e,'" style="white-space: pre-wrap;">').concat(n,"</span></div>")})),t}function g(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return new Promise((function(o){var r=0,a=setInterval((function(){if(r<e.length){n.value+=e[r];var t=new Event("input",{bubbles:!0,cancelable:!0});n.dispatchEvent(t),r++}else clearInterval(a),o()}),t)}))}function f(n){return h.apply(this,arguments)}function h(){return(h=c(r().mark((function n(e){return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n,t){var o=document.querySelector(".z-input-phone.findFriend__input.phone-input");if(!o)return console.error("Phone input container not found"),void t("Phone input container not found");var a=o.querySelector(".phone-iso-picker");if(!a)return console.error("Country picker not found"),void t("Country picker not found");a.click(),setTimeout(c(r().mark((function o(){var a,c,i;return r().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(a=document.querySelector(".country-picker__list")){o.next=5;break}return console.error("Country list not found"),t("Country list not found"),o.abrupt("return");case 5:return c=document.querySelector('[data-translate-placeholder="STR_SEARCH_COUNTRY"]'),o.next=8,g(c,e,50);case 8:if(i=Array.from(a.querySelectorAll(".country-picker__list__item")).find((function(n){return n.querySelector(".country-picker__list__item__code").textContent===e}))){o.next=13;break}return console.error("Country with code ".concat(e," not found")),t("Country with code ".concat(e," not found")),o.abrupt("return");case 13:i.scrollIntoView({behavior:"smooth",block:"nearest"}),setTimeout((function(){i.click(),console.log("Country code set to ".concat(e)),n()}),500);case 15:case"end":return o.stop()}}),o)}))),500)})));case 1:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function p(n){var e,t=n.target;t!==document.body&&("mouseover"===n.type?(t.style.border="1px solid #9254de",t.style.borderRadius="8px",t.style.backgroundColor="#efdbff",function(n,e){var t=document.createElement("div");t.className="mytooltip",t.textContent=e,document.body.appendChild(t);var o=n.getBoundingClientRect(),r=window.pageXOffset||document.documentElement.scrollLeft,a=window.pageYOffset||document.documentElement.scrollTop;t.style.left=o.left+r+"px",t.style.top=o.top+a+"px"}(t,_(t))):(t.style.border="",t.style.borderRadius="0px",t.style.backgroundColor="",(e=document.querySelector(".mytooltip"))&&e.remove()))}function v(n){var e=n.target;if(e!==document.body){var t=_(e);document.body.removeEventListener("mouseover",p),document.body.removeEventListener("mouseout",p),document.body.removeEventListener("click",v,!0),chrome.runtime.sendMessage({task:"CHON_XONG_NOIDUNG",data:t})}}function _(n){if(""!==n.id)return'//*[@id="'.concat(n.id,'"]');if(n===document.body)return"/html/"+n.tagName.toLowerCase();for(var e=0,t=n.parentNode.childNodes,o=0;o<t.length;o++){var r=t[o];if(r===n)return"".concat(_(n.parentNode),"/").concat(n.tagName.toLowerCase(),"[").concat(e+1,"]");1===r.nodeType&&r.tagName===n.tagName&&e++}}function y(n){return new Promise((function(e,t){var o=document.querySelector(n);if(o)return e(o);var r=new MutationObserver((function(t){t.forEach((function(t){for(var o=0,a=Array.from(t.addedNodes);o<a.length;o++){var c=a[o];if(1===c.nodeType&&c.matches(n))return r.disconnect(),e(c)}}))}));r.observe(document.documentElement,{childList:!0,subtree:!0}),setTimeout((function(){r.disconnect(),t(new Error('Element with selector "'.concat(n,'" not found within the time limit.')))}),3e4)}))}function k(n,e){var t=document.querySelector(".zl-modal__container");if(t){var o="[".concat(n,'="').concat(e,'"]'),r=t.querySelector(o);r?r.click():console.log("Element with ".concat(n,'="').concat(e,'" not found within .zl-modal__container.'))}else console.log("Container with class 'zl-modal__container' not found.")}function w(n,e){var t="[".concat(n,'="').concat(e,'"]'),o=document.querySelector(t);o?o.click():console.log("Element with ".concat(n,'="').concat(e,'" not found.'))}i.id="frameMain_th",i.src=chrome.runtime.getURL("../page/popup.html"),document.body.insertBefore(i,document.body.firstChild),document.addEventListener("drop",(function(n){})),s(!0),chrome.runtime.onMessage.addListener((function(n,e,t){if(console.log("Data received in content.js:",n),"click_send_button"===n.task){var o=document.querySelector('[data-translate-title="STR_SEND"]');o?(o.click(),console.log("Send button clicked")):console.log("Send button not found")}"SHOW_HIDE_APP"===n.task&&function(n){var e=n.status;console.log(e),$("#container.WEB").stop(!0,!0),$("#frameMain_th").stop(!0,!0);var t=$("#frameMain_th").width();console.log("width",t),0==t?($("#container.WEB").animate({width:"54%"},"slow"),$("#frameMain_th").animate({width:"45%"},"fast",(function(){document.getElementById("frameMain_th").style.setProperty("width","45%","important")})),$("#frameMain_th").animate({right:"0"},"slow")):($("#container.WEB").animate({width:"100%"},"slow"),$("#frameMain_th").animate({right:"-800px"},"slow",(function(){document.getElementById("frameMain_th").style.setProperty("width","0%","important")})))}(n)}));var E=!1;function x(n){var e=document.querySelector(".popover-v3");e?(n.forEach((function(n){var t=Array.from(e.querySelectorAll(".zmenu-item .truncate")).find((function(e){return e.textContent.trim()===n}));t?t.closest(".zmenu-item").click():console.log('Element with text "'.concat(n,'" not found within .popover-v3.'))})),e.style.display="none"):console.log("Container with class 'popover-v3' not found.")}function S(){var n,t=null,o=e(document.querySelectorAll("#zl-modal__dialog-body"));try{for(o.s();!(n=o.n()).done;){var r=n.value.querySelector("#richInput");if(r){t=r;break}}}catch(n){o.e(n)}finally{o.f()}return t}function A(n,e,t,o,r){return T.apply(this,arguments)}function T(){return T=c(r().mark((function n(e,t,o,a,i){var s,l,u,d,m,g,f,h,p,v,_,A,T,I,z,C,L,N,R,M,D,O;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!E){n.next=2;break}return n.abrupt("return");case 2:if(s=document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue){n.next=6;break}return console.log("Target element not found."),n.abrupt("return");case 6:return console.log(s.textContent),l=new MouseEvent("mouseover",{view:window,bubbles:!0,cancelable:!0}),s.dispatchEvent(l),n.next=11,new Promise((function(n){return setTimeout(n,1500)}));case 11:if(u=document.getElementById("messageViewContainer"),!((d=u.querySelectorAll('[data-translate-title="STR_FORWARD_MSG"]')).length>0)){n.next=54;break}return m=function(n){n.closest(".share-msg__conv-item").click()},g=function(){var n=Array.from(I.querySelectorAll(".share-msg__conv-item__check-box")),e=!1;return n.forEach((function(n){C.includes(n)||(C.push(n),e=!0)})),e},f=function(n){return new Promise((function(e){var t=setInterval((function(){var o=n-z.scrollTop,r=Math.sign(o)*Math.min(Math.abs(o),D/2);z.scrollTop+=r,Math.abs(z.scrollTop-n)<=Math.abs(r)&&(clearInterval(t),e())}),2)}))},h=function(n){for(var e=Array.from(I.querySelectorAll(".share-msg__char-item")),t=0,o=0,r=0;r<e.length;r++){var a=parseInt(e[r].style.top.replace("px",""),10),c=r===e.length-1?1/0:parseInt(e[r+1].style.top.replace("px",""),10);if(a<=n*D&&c>n*D){t=Math.floor((n*D-a)/D),o=a+O;break}}return{startingIndex:t+n,currentPosition:o}},p=function(){var n=c(r().mark((function n(e){var t,o,a,c,i;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=h(e),o=t.startingIndex,a=t.currentPosition,L=o-1,z.scrollTop=a;case 3:if(!(N<R)){n.next=33;break}if(!E){n.next=6;break}return n.abrupt("return");case 6:g();case 7:if(!(L+M>=C.length)){n.next=16;break}if(!E){n.next=10;break}return n.abrupt("return");case 10:return n.next=12,f(z.scrollTop+D*M);case 12:return n.next=14,new Promise((function(n){return setTimeout((function(){g(),n()}),5)}));case 14:n.next=7;break;case 16:c=0;case 17:if(!(c<M)){n.next=31;break}if(!E){n.next=20;break}return n.abrupt("return");case 20:if(!(++L<C.length&&N<R)){n.next=27;break}i=C[L],m(i),N++,n.next=28;break;case 27:return n.abrupt("break",31);case 28:c++,n.next=17;break;case 31:n.next=3;break;case 33:return w("data-translate-inner","STR_FORWARD"),n.next=36,new Promise((function(n){return setTimeout(n,3e3)}));case 36:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),d.forEach((function(n){return n.click()})),n.next=22,new Promise((function(n){return setTimeout(n,500)}));case 22:if((v=S())?(v.placeholder="",v.contentEditable="true",v.classList.remove("empty"),v.textContent="",_=b(i),v.innerHTML=_,A=new Event("input",{bubbles:!0,cancelable:!0}),v.dispatchEvent(A)):console.log("Rich input not found in any modal body"),!(a&&a.length>0)){n.next=33;break}return n.next=27,k("data-translate-inner","STR_LABEL_CLASS_2");case 27:return n.next=29,new Promise((function(n){return setTimeout(n,500)}));case 29:return n.next=31,x(a);case 31:return n.next=33,new Promise((function(n){return setTimeout(n,500)}));case 33:return n.next=35,w("data-translate-inner","STR_CONTACT_FRIENDS");case 35:return n.next=37,new Promise((function(n){return setTimeout(n,500)}));case 37:return n.next=39,y('div[data-id="div_SpamMsg_Thread"]');case 39:return T=n.sent,I=T.querySelector(".ReactVirtualized__Grid__innerScrollContainer"),z=T.querySelector(".ReactVirtualized__Grid"),C=[],L=-1,N=0,R=o,M=1,D=48,O=29,z.addEventListener("scroll",(function(){setTimeout(g,50)})),n.next=52,p(t);case 52:n.next=55;break;case 54:console.log("Sibling with the specified attribute not found.");case 55:case"end":return n.stop()}}),n)}))),T.apply(this,arguments)}function I(n,e){for(var t=[],o=0;o+e<=n;)t.push(o),o+=e;return o<n&&t.push(o),t.push(n),t}function z(){return z=c(r().mark((function n(o,a,i){var s;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:E=!1,s=localStorage.getItem("sh_zlast_uid"),indexedDB.open("zdb_".concat(s)).onsuccess=function(){var n=c(r().mark((function n(s){var u,d,m,b;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:u=s.target.result,d=u.transaction(["friend"],"readonly"),m=d.objectStore("friend"),(b=m.getAll()).onsuccess=function(){var n=c(r().mark((function n(c){var s,u,d,m,b,g,f,h,p,v,_,y,k,w,x,S,T,z,C,L,N;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=c.target.result,u=s.length,d=I(u,100),m=0;case 4:if(!(m<d.length)){n.next=48;break}if(!E){n.next=7;break}return n.abrupt("return");case 7:if(b=d[m],g=b,f=0,m<d.length-1&&(h=d[m+1],f=h-g),!(m<d.length-1)){n.next=45;break}p=e(o.entries()),n.prev=13,p.s();case 15:if((v=p.n()).done){n.next=37;break}if(r=v.value,R=2,_=function(n){if(Array.isArray(n))return n}(r)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,r,a,c,i=[],s=!0,l=!1;try{if(a=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;s=!1}else for(;!(s=(o=a.call(t)).done)&&(i.push(o.value),i.length!==e);s=!0);}catch(n){l=!0,r=n}finally{try{if(!s&&null!=t.return&&(c=t.return(),Object(c)!==c))return}finally{if(l)throw r}}return i}}(r,R)||t(r,R)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),_[0],y=_[1],!E){n.next=19;break}return n.abrupt("return");case 19:return k=new Date,w=k.getFullYear(),x=k.getMonth()+1,S=k.getDate(),T=k.getHours(),z=k.getMinutes(),C=k.getSeconds(),L="".concat(w,"-").concat(x,"-").concat(S," ").concat(T,":").concat(z,":").concat(C),console.log("ĐANG SHARE: ".concat(L," ===>"),"".concat(g,": ").concat(f)),n.next=30,A(y.content,g,f,a,i);case 30:return console.log("FINISHED SHARE: ".concat(L," ===>"),"".concat(g,": ").concat(f)),N=g+f,chrome.runtime.sendMessage({task:"TRANGTHAI_SHARE",message:"Trạng thái: Đã share thành công (".concat(N,"/").concat(u,"), bạn ơi.")}),n.next=35,l(300);case 35:n.next=15;break;case 37:n.next=42;break;case 39:n.prev=39,n.t0=n.catch(13),p.e(n.t0);case 42:return n.prev=42,p.f(),n.finish(42);case 45:m++,n.next=4;break;case 48:console.log("TOTAL FRIEND",u);case 49:case"end":return n.stop()}var r,R}),n,null,[[13,39,42,45]])})));return function(e){return n.apply(this,arguments)}}(),b.onerror=function(n){console.error("Error reading all entries:",n)};case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();case 4:case"end":return n.stop()}}),n)}))),z.apply(this,arguments)}function C(n,e){var t=indexedDB.open("zdb_".concat(n));t.onsuccess=function(t){var o=t.target.result,r=o.transaction(["friend"],"readonly"),a=r.objectStore("friend"),c=a.getAll();c.onsuccess=function(t){var i=t.target.result;i=i.filter((function(n){return!(0===n.isValid||1===n.isBlocked||0!==n.accountStatus)})),r=o.transaction(["label"],"readonly"),(a=r.objectStore("label")).getAll().onsuccess=function(t){var s=t.target.result,l={};i.forEach((function(n){l[n.userId]=n.userId})),i.forEach((function(n){n.tag="Không có nhãn"})),s.forEach((function(n){i.forEach((function(e){n.conversations.some((function(n){return l[n]===e.userId}))&&(e.tag=n.text)}))})),i.length=0,r=o.transaction(["group"],"readonly"),a=r.objectStore("group"),(c=a.getAll()).onsuccess=function(t){var o=t.target.result;o.forEach((function(n){n.tag="NHÓM VÀ CỘNG ĐỒNG"})),o.forEach((function(t){if("1"==e)t.creatorId==n?i.push(t):t.topMember.forEach((function(e){e.id==n&&e.isAdmin&&i.push(t)}));else{if(t.creatorId==n)return;var o=!0;t.topMember.forEach((function(e){e.id==n&&e.isAdmin&&(o=!1)})),o&&i.push(t)}})),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_RECEIVED",friends:i})}}},c.onerror=function(n){console.error("Error reading all entries:",n)}},t.onerror=function(n){console.error("Error opening database:",n)}}function L(n){var e=n.running,t=document.querySelector(".n2-custome-zalo-theme");if(t&&document.head.removeChild(t),e){var o=document.createElement("style");o.classList.add(O),o.innerHTML='\n    :root {\n      --n2-sidebar-bg-color: #333;\n      --n2-main-bg-color: #444;\n      --n2-primary-color: #e4e6eb;\n      --n2-neutral-color: #234;\n      --primary-text: #e4e6eb;\n      --NG60: #e4e6eb;\n      --N300: #e4e6eb;\n      --NG10: #333;\n      --NG70: #e4e6eb;\n      --WA100: #444;\n      --n2-loading-bg-color: #333;\n      --n2-sidebar-hover-bg-color: #444;\n      --n2-hr-color: #222;\n      --n2-white-opacity-bg-color: rgba(244, 244, 244, 0.4);\n      --n2-359bed-opacity-color: rgba(53, 155, 237, 0.3);\n      --n2-mention-color: #eff;\n      --n2-mention-bg-color: rgba(0, 139, 139, 0.4);\n      --n2-not-me-msg-background: #233;\n      --n2-not-me-msg-box-shadow: #141e1e;\n      --n2-me-msg-background: #277dbf;\n      --n2-me-msg-box-shadow: #216aa1;\n      --n2-sender-name-color: #9f8424;\n      --n2-time-color: #bbb;\n      --neutral-300: #e4e6eb;\n      --neutral-400: #d5d8e0;\n      --neutral-500: #9ba2b5;\n      --black-base: var(--neutral-300);\n      --black-600: var(--neutral-400);\n      --neutral-base: #e4e6eb;\n      --grey-base: #444;\n      --grey-600: #2b2b2b;\n      --item-wa-hover: #2b2b2b;\n      --lst-item-hover: #2b2b2b;\n      --lst-item-select: #2b2b2b;\n      --text-primary: #e4e6eb;\n      --layer-background-selected: #2b2b2b;\n      --layer-background-hover: #2b2b2b;\n      --layer-background-disabled: #444;\n      --text-secondary: #c8bccb;\n      --layer-background: #333;\n      --layer-background-subtle: #444;\n      --button-neutral-text: #e4e6eb;\n      --button-neutral-normal: #234;\n      --button-tertiary-neutral-focus-bg: #234;\n      --button-neutral-hover: #111a22;\n      --surface-background-subtle: #333;\n      --blue-message: #444;\n      --WA80: #333;\n    }\n    body,\n    html {\n      background-color: #444;\n      color: #e4e6eb;\n      text-shadow: 0 0 1px currentColor;\n    }\n    ::selection {\n      background: #ff9100;\n      color: #000;\n    }\n    #loading-page {\n      background-color: var(--n2-loading-bg-color);\n      color: var(--n2-primary-color);\n    }\n    aside {\n      border-color: var(--n2-hr-color);\n    }\n    .btn,\n    .subtitle {\n      color: #fff;\n    }\n    #app #chatOnboard,\n    #app #chatOnboard .chat-onboard,\n    #app #chatOnboard .chat-onboard * {\n      background-color: var(--n2-sidebar-bg-color);\n      color: var(--n2-primary-color);\n    }\n    #chatViewContainer {\n      color: var(--n2-primary-color);\n    }\n    .message-view__blur__overlay {\n      background-color: #222;\n    }\n    #chatViewContainer #header,\n    #chatViewContainer #header .title.header-title,\n    #chatViewContainer #header .icon-only {\n      background-color: #2b2b2b;\n      color: var(--n2-primary-color);\n    }\n    #chatViewContainer #header .truncate {\n      background-color: brown;\n      padding: 0.2em 0.8em;\n      border-radius: 3px;\n      color: var(--n2-primary-color) !important;\n    }\n    .leftbar-tab {\n      color: #e4e6eb;\n    }\n    #filter-tags-sb .filter-tag-item.--activated {\n      color: #e4e6eb;\n    }\n    .main-title-container .lock-icon {\n      background-color: rgba(0, 0, 0, 0);\n    }\n    .chat-message,\n    .chat-message a {\n      color: var(--n2-primary-color);\n    }\n    .card {\n      border-radius: 0.3em;\n    }\n    .chat-message.highlighted .card:not(.card--group-photo) {\n      background-color: var(--n2-not-me-msg-background);\n      border: solid 2px #ff4500;\n    }\n    .me.chat-message.highlighted .card:not(.card--group-photo) {\n      background-color: var(--n2-me-msg-background);\n    }\n    .chat-message .card-sender-name,\n    .chat-message .card.card--text.show-sender > .card-sender-name {\n      color: var(--n2-sender-name-color);\n    }\n    .card,\n    .card[data-id="div_ReceivedMsg_Text"],\n    .card[data-id="div_LastReceivedMsg_Text"],\n    .card.card--oa > .oa-msg-child,\n    .card.card--oa > .oa-msg-header,\n    .img-msg-v2.-bg-v-1 .img-msg-v2__bub > .img-msg-v2__th,\n    .img-msg-v2.-caption.-me > .img-msg-v2__bub,\n    .card.card--text:not(.me) {\n      background-color: var(--n2-not-me-msg-background);\n      color: var(--n2-primary-color);\n      box-shadow: 0 0 3px var(--n2-not-me-msg-box-shadow);\n    }\n    .card.me,\n    .card.me[data-id="div_SentMsg_Text"],\n    .card.me[data-id="div_LastSentMsg_Text"],\n    .chat-message.me .img-msg-v2.-bg-v-1 .img-msg-v2__bub > .img-msg-v2__th,\n    .chat-message.me .img-msg-v2.-caption.-me > .img-msg-v2__bub,\n    .card.card--text.me {\n      background-color: var(--n2-me-msg-background);\n      box-shadow: 0 0 3px var(--n2-me-msg-box-shadow);\n      color: var(--n2-primary-color);\n    }\n    .call-msg {\n      border-style: none;\n    }\n    .card.card--sticker {\n      background-color: rgba(0, 0, 0, 0);\n      box-shadow: none;\n    }\n    .card-send-time {\n      color: var(--neutral-500);\n    }\n    a.mention-name,\n    .card.card--text .mention-name,\n    .card.card--text a.mention-name {\n      padding: 0em 0.2em;\n      color: var(--n2-mention-color);\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      text-decoration: none;\n      font-weight: 600;\n    }\n    .card .rel.quote-banner {\n      background-color: var(--n2-white-opacity-bg-color) !important;\n    }\n    .card .rel.quote-banner .quote-banner-content .quote-text {\n      color: var(--n2-primary-color);\n    }\n    .card .message-reaction-container .reacts-list,\n    .img-msg-v2 .reacts-list {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .card .message-reaction-container .msg-reaction-icon {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .card.card--text a,\n    .card.card--link a {\n      padding: 0.1em 0.5em;\n      color: var(--n2-primary-color);\n      text-decoration: underline;\n    }\n    .chat-input,\n    .chat-input__content {\n      background-color: var(--n2-hr-color);\n      border-color: var(--n2-hr-color);\n    }\n    .chat-input.highlight,\n    .chat-input__content.highlight {\n      background-color: var(--n2-sidebar-bg-color);\n      border-color: var(--n2-hr-color);\n    }\n    #ztoolbar.chat-input-v2,\n    #ztoolbar.chat-input-v2 .z--btn.icon-only {\n      background-color: #222;\n      color: var(--n2-primary-color);\n    }\n    .chat-input-container {\n      color: var(--n2-primary-color);\n    }\n    .doing-something {\n      color: var(--n2-primary-color);\n      background-color: var(--n2-hr-color);\n    }\n    .img-msg-v2.-caption:not(.-me) > .img-msg-v2__bub {\n      background-color: var(--n2-not-me-msg-background);\n    }\n    .chat-date > span {\n      background-color: rgba(0, 0, 0, 0);\n      border: solid 1px #3a3939;\n    }\n    .chat-date .line {\n      border-color: #3a3939;\n    }\n    .card-send-time {\n      color: #d1d1d1;\n    }\n    .card--group-photo.-bg-v-1 .card--group-photo__row__item__img,\n    .card--group-photo.-bg-v-1 .card--group-photo__row__item__img.undo {\n      background-color: #2b2b2b;\n    }\n    .call-msg.--callee {\n      background-color: #2b2b2b;\n    }\n    .chat-message .extra-btn {\n      background-color: #2b2b2b;\n      color: #e4e6eb;\n    }\n    .chat-message .extra-btn:hover {\n      color: #e4e6eb;\n    }\n    .sticker-selector__menu__scrollbar,\n    .sticker-selector__menu__scrollbar .emoji-icons.active,\n    .sticker-selector__menu__scrollbar .emoji-icons,\n    .sticker-selector__menu__scrollbar .sticker-recent,\n    .sticker-selector__menu__scrollbar .sticker-recent-active,\n    #gifSelector,\n    #gifSelector .gif-content {\n      background-color: #444 !important;\n      color: #fff;\n    }\n    .ReactVirtualized__Grid__innerScrollContainer {\n      background-color: #444 !important;\n      color: #fff !important;\n    }\n    .card.card--undo > span {\n      color: gray;\n    }\n    .chat-date {\n      color: var(--n2-time-color);\n    }\n    .image-show__bottom__sender__info {\n      color: var(--n2-primary-color);\n    }\n    .image-show__bottom__ctrl > .btn,\n    .image-show__bottom__ctrl > a > .btn {\n      color: var(--n2-primary-color);\n    }\n    .image-show__icon-fullscreen {\n      color: var(--n2-primary-color);\n    }\n    .image-show__btn__inside {\n      color: var(--n2-primary-color);\n    }\n    .timeline-slider__handle {\n      background-color: var(--n2-primary-color);\n    }\n    .td-msg-v3 {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .card-send-time__sendTime.bubble-message-time {\n      color: var(--n2-time-color);\n    }\n    .chat-content .bubble-message-status {\n      color: var(--n2-time-color);\n    }\n    .card-send-time .card-send-time__sendTime {\n      color: var(--n2-time-color);\n    }\n    #chatViewContainer .message-view__banner,\n    #chatViewContainer .message-view__banner .message-view__banner__text,\n    .chat-group-topic *,\n    .group-poll-info .group-poll-info-msg-info,\n    .group-poll-info .group-poll-info-more,\n    .group-poll-info .group-poll-info-body,\n    .group-poll-info .group-poll-info-body .group-poll-info-title {\n      background-color: var(--n2-sidebar-bg-color) !important;\n      color: var(--n2-primary-color) !important;\n    }\n    .group-poll-info-content-item {\n      background-color: #565656;\n    }\n    .group-poll-info .group-poll-info-body .group-poll-info-content-item-progress,\n    .group-poll-vote-content-item-progress {\n      background-color: #008b8b;\n    }\n    #chatViewContainer .group-topic:before,\n    #chatViewContainer .message-view__banner:before,\n    #chatViewContainer .msgbannerbf {\n      border-bottom: solid 1px var(--n2-main-bg-color);\n    }\n    #chatViewContainer .chat-group-topic__item.border-two-sided {\n      border-color: var(--n2-main-bg-color);\n    }\n    #message-view__blur {\n      display: none;\n    }\n    .message-view:after,\n    .message-view:before {\n      border-color: var(--n2-hr-color);\n    }\n    .message-view #ztoolbar.chat-input-v2 {\n      background-color: var(--n2-main-bg-color);\n    }\n    .zl-dlg-paper,\n    .zl-fl-dlg > .zl-fl-dlg__paper,\n    .zl-modal__dialog,\n    .tab-main.border-bottom,\n    .zl-modal__dialog__header,\n    .group-setting__disable-banner {\n      background-color: var(--n2-sidebar-bg-color);\n      border-color: #2b2b2b;\n    }\n    .zl-modal__dialog__header__title-text {\n      color: #fff;\n    }\n    .event-message > div,\n    .onboard-message > div {\n      background-color: #303030;\n    }\n    .cloud__header {\n      background-color: #444;\n    }\n    .snack-body {\n      background-color: #222;\n      border: solid 3px #999;\n      box-shadow: none;\n      color: #fff;\n    }\n    .z-tooltip {\n      background-color: #444;\n      color: #e4e6eb;\n    }\n    .friend-profile__detail__line {\n      border-color: rgba(0, 0, 0, 0);\n    }\n    .friend-profile__footer__content {\n      border-color: #201d1d;\n    }\n    .user-profile-footer-button:hover:not(.disabled-btn) {\n      color: #e4e6eb;\n      background-color: #2b2b2b;\n    }\n    .message-view__ecard_new_fr {\n      background-color: #444;\n    }\n    .search-tool,\n    .search-tool-list {\n      background-color: #444;\n      border-color: rgba(0, 0, 0, 0);\n    }\n    .media-dock-main {\n      background-color: var(--n2-main-bg-color);\n    }\n    .media-dock-main .media-tabs__main {\n      border-color: var(--n2-sidebar-bg-color);\n    }\n    .media-dock-main .media-tabs__main.active {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .group-board-item .gbi-question,\n    .group-board-item .reminder-title,\n    .view-notice-pinmsg-content .gbi-question,\n    .view-notice-pinmsg-content .reminder-title,\n    .view-notice-topic-content .gbi-question,\n    .view-notice-topic-content .reminder-title {\n      color: var(--n2-primary-color) !important;\n    }\n    .overlay__video__duration {\n      color: var(--n2-primary-color);\n    }\n    .video-msg-container .outline-bubble .overlay__video .avatar-img {\n      color: #fff !important;\n    }\n    .tipv2-content {\n      color: var(--n2-primary-color);\n    }\n    .zavatar.zavatar-l .a-child,\n    .zavatar.zavatar-xl .a-child {\n      border-color: #333;\n      background-color: #233;\n    }\n    .pi-info-layout__primary-info-container {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    #sidebarNav,\n    #sidebarNav #contact-search,\n    #conversationListId,\n    #conversationListId .msg-item .conv-item,\n    .contact-list__add:hover {\n      background-color: var(--n2-sidebar-bg-color);\n      color: var(--n2-primary-color);\n    }\n    .share-msg__msg-content {\n        background-color: #111919;\n        padding: 8px 12px;\n        margin: 12px 0;\n        border-radius: 4px;\n    }\n    #conversationListId .msg-item .conv-item:hover {\n      background-color: var(--n2-sidebar-hover-bg-color);\n    }\n    #conversationListId .msg-item .conv-item .conv-message.truncate .truncate {\n      color: var(--n2-primary-color);\n      filter: brightness(0.9);\n      font-size: 95%;\n    }\n    .conv-item,\n    .conv-item.selected,\n    #conversationListId .msg-item .conv-item.selected,\n    #contactList .conv-item.selected {\n      background-color: var(--n2-main-bg-color);\n    }\n    .conv-item .conv-item-title .conv-item-title__name,\n    #conversationListId .msg-item .conv-item-title .conv-item-title__name,\n    #contactList .conv-item .conv-item-title .conv-item-title__name,\n    .conv-item .conv-item-title__name,\n    .conv-item .conv-item-title__name--bold {\n      color: var(--n2-primary-color);\n    }\n    #contactList .item,\n    #contactList .conv-item,\n    #contactList .contact-list-item {\n      background-color: rgba(0, 0, 0, 0);\n    }\n    .chat-box-member {\n      color: #e4e6eb;\n    }\n    .chat-box-member__info.v2:hover {\n      background-color: #303030;\n    }\n    #group-creator .create-group__item {\n      background-color: rgba(0, 0, 0, 0);\n    }\n    #group-creator .create-group__item:hover:not(.i-disabled) {\n      background-color: #303030;\n    }\n    .zl-modal__footer__button-action {\n      background-color: #2b2b2b;\n    }\n    .zl-group-input .zl-input {\n      background-color: #303030;\n      color: #e4e6eb;\n    }\n    .zl-label {\n      color: #e4e6eb;\n    }\n    .zl-group-input.zl-group-input__appearance--text:not(\n        .zl-group-input__affix-wrapper\n      )\n      > .zl-input,\n    .zl-group-input.zl-group-input__appearance--text\n      > .zl-group-input__affix-wrapper__prefix-icon,\n    .zl-group-input.zl-group-input__appearance--text\n      > .zl-group-input__affix-wrapper__suffix-icon {\n      padding: 0 1em;\n    }\n    .group-board-page > .gb-content,\n    .group-board-item,\n    .view-notice-pinmsg-content,\n    .view-notice-topic-content,\n    .group-board-item.v2 .item-title-v2,\n    .v2.view-notice-pinmsg-content .item-title-v2,\n    .v2.view-notice-topic-content .item-title-v2,\n    .group-board-item.v2 .item-time-info,\n    .v2.view-notice-pinmsg-content .item-time-info,\n    .v2.view-notice-topic-content .item-time-info,\n    .group-board-item .gbi-pmsg-content .pmsg-msg,\n    .view-notice-pinmsg-content .gbi-pmsg-content .pmsg-msg,\n    .view-notice-topic-content .gbi-pmsg-content .pmsg-msg,\n    .group-board-page > .gb-tab-btn,\n    .group-board-page > .gb-tabs,\n    .group-board-page,\n    .group-board-page .gb-tab,\n    .mg-item,\n    .zl-dropdown--preview,\n    .z--btn--outline--tertiary,\n    .sticker-selector#stickerSelector,\n    .sticker-selector__content__name,\n    .sticker-selector__content__selected,\n    .sticker-selector__content .ReactVirtualized__Grid__innerScrollContainer .flx,\n    #itemSuggestPopover:hover,\n    .sticker-suggestion.chat-message.first-selected,\n    .sticker-suggestion.chat-message.last-selected,\n    .sticker-suggestion.selected,\n    .sticker-suggestion:hover,\n    .zmenu-body.content-only,\n    .search-tool-list,\n    .sticker-selector__content,\n    .search-result-empty .search-empty-guide,\n    .search-result-hint,\n    .search-tool,\n    .zl-group-input__search:not(.inherit-input) > .zl-input,\n    .zl-compose > .rich-input,\n    .zl-compose,\n    .pr-action-item,\n    .member-list-popup-preview,\n    .chips,\n    .chips-choice,\n    .qrsc,\n    .zl-group-input,\n    .user-reacted-container,\n    .user-reacted-container::before,\n    .chat-message__actions,\n    .chat-info-link__action,\n    .cb-info-file-item__actions-container,\n    .cb-info-file-item__actions-container > div {\n      color: #e4e6eb;\n      background: #444 !important;\n      background-color: #444 !important;\n    }\n    .leftbar-unread.unread-red {\n      color: #e4e6eb;\n    }\n    .conv-action__unread .conv-unread {\n      color: #e4e6eb !important;\n    }\n    #contact-search .group-search {\n      color: #e4e6eb;\n    }\n    #contact-search .group-search .fake-textholder {\n      color: #e4e6eb;\n    }\n    #contact-search .group-search #contact-search-input {\n      border: none;\n      color: #e4e6eb;\n      background: #201d1d !important;\n      background-color: #201d1d !important;\n    }\n    .qrsc .qri {\n      color: #e4e6eb;\n      background: #2d2d2d !important;\n      background-color: #2d2d2d !important;\n    }\n    .popover-v2,\n    .popover-v3,\n    .zmenu-body.content-only {\n      border-color: #2b2b2b;\n    }\n    .z--btn--outline--tertiary {\n      border-color: rgba(0, 0, 0, 0);\n    }\n    .file-actions-row__icon,\n    .media-item.focusItem:not(.sel-mode) .show-on-hover,\n    .media-item:hover:not(.sel-mode) .show-on-hover,\n    .zmenu-item {\n      color: #e4e6eb !important;\n    }\n    .search-title-container .search-subtitle,\n    .search-title-container .search-title,\n    .search-list-title,\n    .search-msg-item .st-name,\n    .search-msg-item .st-date,\n    .search-msg-item .st-message,\n    .z--btn--text--tertiary,\n    .search-filter-txt,\n    .sb-label__filter,\n    .edit_alias-description,\n    .lbl-conv-item,\n    .cal-popup,\n    .z-radio,\n    .view-notice-topic-content-v2--group,\n    .view-notice-topic-content-v2 .notice-time-section,\n    .view-notice-topic-content-v2 .notice-time-section > .content > .line,\n    .view-notice-topic-content-v2 .notice-time-section > .content > .line > .title,\n    .file-message__content-container,\n    .card-title,\n    .lb-more-menu .more-pop-item,\n    .lb-more-menu .more-pop-item > i,\n    .cal-preview {\n      color: #e4e6eb;\n      background: rgba(0, 0, 0, 0) !important;\n      background-color: rgba(0, 0, 0, 0) !important;\n    }\n    .zmenu-item:hover:not(.subtitle),\n    .search-msg-item:hover,\n    .sticker-zone-search.isHover,\n    .sticker-zone:hover,\n    #itemSuggestPopover .item-sticker:hover,\n    .sticker-suggestion > .item-sticker.active,\n    .sticker-suggestion > .item-sticker:hover,\n    .lb-more-menu .more-pop-item:hover {\n      background-color: #2b2b2b !important;\n    }\n    .dd-dropdown-ui:hover,\n    .dd-options:hover:not(.prevent-hover) {\n      background-color: #111;\n    }\n    .group-board-page > .gb-tab-btn,\n    .group-board-page > .gb-tabs {\n      border-color: #666;\n    }\n    .group-board-page .gb-tab.chat-message.first-selected,\n    .group-board-page .gb-tab.chat-message.last-selected,\n    .group-board-page .gb-tab.selected {\n      border-width: 4px;\n    }\n    .group-board-item.v2 .item-calendar-preview,\n    .v2.view-notice-pinmsg-content .item-calendar-preview,\n    .v2.view-notice-topic-content .item-calendar-preview,\n    .reminder-info-v2,\n    .reminder-info-v2 > .content > .cal {\n      background-color: #2b2b2b;\n      border-color: #222;\n    }\n    .message-info > div {\n      background-color: #2b2b2b;\n    }\n    .group-poll-info-content-item-progress,\n    .group-poll-vote-content-item-progress {\n      background-color: #369;\n    }\n    .media-dock-tabs {\n      border-color: #444;\n    }\n    .search-msg-item .st-highlight,\n    .edit_alias-description-name {\n      color: #e4e6eb;\n      font-weight: 900;\n    }\n    .conv-action {\n      color: #b36600;\n    }\n    .conv-action:hover {\n      color: #ff9100;\n    }\n    .cal-preview-v3 {\n      color: #e4e6eb;\n      background: #444 !important;\n      background-color: #444 !important;\n    }\n    .cal-preview-v3:hover {\n      color: #e4e6eb;\n      background: #444 !important;\n      background-color: #444 !important;\n    }\n    #calendar-v3,\n    #calendar-v3 *,\n    #calendar-v3 > .cal-content .cal-item {\n      color: #e4e6eb;\n      background: #444 !important;\n      background-color: #444 !important;\n    }\n    .z--btn--fill--tertiary {\n      background-color: #233;\n      color: #e4e6eb;\n      border: solid 1px #324b4b;\n    }\n    .z--btn--fill--tertiary:hover:not(.--disabled) {\n      background-color: #324b4b;\n      color: #e4e6eb;\n      border-color: #233;\n    }\n    .group-board-item.v2,\n    .v2.view-notice-pinmsg-content,\n    .v2.view-notice-topic-content {\n      border-color: #333;\n    }\n    .z--btn--chatbar--danger,\n    .z--btn--chatbar--primary,\n    .z--btn--chatbar--secondary,\n    .z--btn--chatbar--secondary-red,\n    .z--btn--chatbar--tertiary {\n      color: #fff;\n    }\n    .chat-empty-friend-info,\n    .chat-empty-card-friend {\n      background-color: #444;\n      color: #e4e6eb;\n    }\n    .btn-jump > div {\n      color: #eff;\n      border: solid 1px #359bed;\n    }\n    .chat-info {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .chat-info__header {\n      background-color: #2b2b2b;\n    }\n    .chat-info__header .chat-info__header__title,\n    .chat-info__header .chat-info__header__title .z--btn--text--tertiary {\n      color: #fff;\n    }\n    aside .chat-info {\n      color: #fff;\n    }\n    .chat-info .chat-info__header:before,\n    .chat-info .chat-info-general__item:after {\n      border-color: var(--n2-hr-color);\n    }\n    .chat-info .chat-info-general__item--title {\n      color: #fff;\n    }\n    .chat-info .chat-info-general__section--border {\n      border-color: var(--n2-sidebar-bg-color);\n    }\n    .chat-info .chat-info-link__title {\n      color: #fff;\n    }\n    .chat-info .tab-bar-item {\n      color: #fff;\n    }\n    .chat-info .cb-info-file-item__file-name,\n    .chat-info .media-item-title {\n      color: #fff;\n    }\n    .chat-info .chat-info-general__item:hover,\n    .media-item.focusItem:not(.sel-mode),\n    .media-item:hover:not(.sel-mode) {\n      background-color: var(--n2-not-me-msg-box-shadow);\n    }\n    .media-empty-text,\n    .chat-info-general__item--title--sub,\n    .cb-info-file-item__file-size,\n    .cb-info-file-item__suggest-preview-file,\n    .cb-info-file-item__suggest-preview-folder,\n    .tab-main .tab-item,\n    .group-setting__title,\n    .group-setting {\n      color: #b9b2b2 !important;\n    }\n    .z--btn--text--tertiary:hover:not(.--disabled) {\n      background-color: var(--n2-hr-color);\n    }\n    #group-creator .create-group__nav {\n      background-color: #222;\n    }\n    .msg-filters-bar {\n      border-top: solid 1px var(--n2-hr-color);\n    }\n    nav {\n      border-right: solid 1px var(--n2-hr-color);\n    }\n    .zl-avatar {\n      border-color: var(--n2-sidebar-bg-color);\n      box-shadow: none;\n    }\n    .zl-avatar .zl-avatar__photo {\n      background-color: var(--n2-sidebar-bg-color);\n    }\n    .chat-info-general__item--icon {\n      color: var(--n2-primary-color);\n    }\n    main.friend-center-main {\n      background-color: var(--n2-main-bg-color);\n    }\n    #chatViewContainer #chat-view,\n    #messageViewScroll,\n    #messageViewContainer {\n      background-color: #222;\n      color: var(--n2-primary-color);\n    }\n      #main-tab {\n        width: 64px;\n        flex: none;\n        box-sizing: border-box;\n        background: var(--layer-background-inverse);\n        position: relative;\n        margin-top: -24px;\n    }\n    .leftbar-tab.chat-message.first-selected, .leftbar-tab.chat-message.last-selected, .leftbar-tab.selected {\n        background: #a52a2a;\n    }\n\n    .leftbar-tab:hover {\n        background: #a52a2a;\n    }\n    .message-view__blur {\n      background-color: #222;\n    }\n    .friend-center-main .rel > div {\n      background-color: var(--n2-main-bg-color) !important;\n      border-radius: 50%;\n    }\n    .friend-center-main .friend-center-item-v2,\n    .friend-center-main .fr-center-top {\n      background-color: #233 !important;\n      color: #fff;\n    }\n    .friend-center-main .fr-center-top div {\n      color: #fff !important;\n    }\n    .ReactVirtualized__Grid__innerScrollContainer {\n      color: #fff;\n    }\n    .todo-view,\n    .todo-tab,\n    .todo-tab .td-tab.chat-message,\n    .todo-tab .td-tab,\n    .td-empty-container,\n    .td-empty-container > .emp-txt,\n    .todo-close-button,\n    .todo-tab .td-sub-tab.chat-message,\n    .todo-tab .td-sub-tab {\n      background-color: #444;\n      color: var(--n2-primary-color) !important;\n    }\n    .todo-view.selected,\n    .todo-view.first-selected,\n    .todo-view.last-selected,\n    .todo-tab.selected,\n    .todo-tab.first-selected,\n    .todo-tab.last-selected,\n    .todo-tab .td-tab.chat-message.selected,\n    .todo-tab .td-tab.chat-message.first-selected,\n    .todo-tab .td-tab.chat-message.last-selected,\n    .todo-tab .td-tab.selected,\n    .todo-tab .td-tab.first-selected,\n    .todo-tab .td-tab.last-selected,\n    .td-empty-container.selected,\n    .td-empty-container.first-selected,\n    .td-empty-container.last-selected,\n    .td-empty-container > .emp-txt.selected,\n    .td-empty-container > .emp-txt.first-selected,\n    .td-empty-container > .emp-txt.last-selected,\n    .todo-close-button.selected,\n    .todo-close-button.first-selected,\n    .todo-close-button.last-selected,\n    .todo-tab .td-sub-tab.chat-message.selected,\n    .todo-tab .td-sub-tab.chat-message.first-selected,\n    .todo-tab .td-sub-tab.chat-message.last-selected,\n    .todo-tab .td-sub-tab.selected,\n    .todo-tab .td-sub-tab.first-selected,\n    .todo-tab .td-sub-tab.last-selected {\n      background-color: #2b2b2b;\n    }\n    .todo-tab .td-tab .td-unread-badge.bagde-count.inactive {\n      color: #333 !important;\n    }\n    .todo-status-button-v3 > .button-inside {\n      background-color: #2b2b2b;\n    }\n    .td-item-v3 {\n      background-color: #444;\n      color: var(--n2-primary-color) !important;\n    }\n    .td-item-v3:hover {\n      background-color: #2b2b2b;\n    }\n    #scroll-vertical div {\n      background-color: rgba(222, 222, 222, 0.5) !important;\n    }\n    .create-todo-icon {\n      color: var(--n2-primary-color);\n    }\n        .card.me, .card.me[data-id="div_SentMsg_Text"], .card.me[data-id="div_LastSentMsg_Text"], .chat-message.me .img-msg-v2.-bg-v-1 .img-msg-v2__bub > .img-msg-v2__th, .chat-message.me .img-msg-v2.-caption.-me > .img-msg-v2__bub, .card.card--text.me {\n    background-color: #2d3748;\n    box-shadow: 0 0 3px #373737;\n    color: var(--n2-primary-color);\n}\n\n    .card--group-photo__row__item\n      .todo-header-container\n      > img.card--group-photo__row__item__photo,\n    .chat-message-picture__photo.todo-header-container > img,\n    .group-topic.todo-header-container > .topic-banner__thumb-default,\n    .link-preview-v2 .todo-header-container > .preview-thumb-link,\n    .rl-msg .rl-link-thumb .todo-header-container > .rl-thumb-lnk__thumb-default,\n    .todo-header-container > .b-item-thumb-image__thumb-default,\n    .todo-header-container > .card--link-img,\n    .todo-header-container > .cb-info-file-item-overlay__check,\n    .todo-header-container > .chat-message-picture__gif__thumb,\n    .todo-header-container > .fa,\n    .todo-header-container > .file-tick__icon-setting,\n    .todo-header-container > .image-placeholder,\n    .todo-header-container > .image-show__thumb,\n    .todo-header-container > .link-placeholder,\n    .todo-header-container > .link-thumb,\n    .todo-header-container > .media-item__file-type.photo,\n    .todo-header-container > .media-store-preview-item__picture,\n    .todo-header-container > .quote-banner-thumb,\n    .todo-header-container > .quote-base__close-icon,\n    .todo-header-container > .thumb-default,\n    .todo-header-container > .thumb-img-suggest,\n    .todo-header-container > img.chat-message-picture__photo {\n      color: var(--n2-primary-color);\n    }\n    .filter-att-item {\n      background-color: #234 !important;\n    }\n    .noti-tab-title {\n      color: #e4e6eb;\n    }\n    .friend-profile__block-stories {\n      background-color: #234 !important;\n    }\n    .setting-menu__item.chat-message,\n    .setting-menu__item.chat-message,\n    .setting-menu__item {\n      background-color: var(--n2-main-bg-color);\n    }\n    .setting-menu__item.chat-message:hover,\n    .setting-menu__item.chat-message:hover,\n    .setting-menu__item:hover {\n      background-color: #444;\n    }\n    .setting-menu__item.chat-message.last-selected,\n    .setting-menu__item.chat-message.first-selected,\n    .setting-menu__item.chat-message.selected,\n    .setting-menu__item.chat-message.last-selected,\n    .setting-menu__item.chat-message.first-selected,\n    .setting-menu__item.chat-message.selected,\n    .setting-menu__item.last-selected,\n    .setting-menu__item.first-selected,\n    .setting-menu__item.selected {\n      background-color: #233;\n    }\n    .z--btn--fill--secondary {\n      background-color: #fff;\n    }\n    .tds-banner-download__container {\n      background-color: var(--n2-main-bg-color);\n    }\n    .tds-banner-download__container .tds-banner-download__action-button-wrapper {\n      color: var(--n2-primary-color);\n    }\n    .z-toggle > div,\n    .z-toggle.--m > div {\n      background-color: var(--n2-primary-color);\n    }\n    .z--btn--v2.btn-tertiary-neutral:active,\n    .z--btn--v2.btn-tertiary-neutral:hover {\n      background-color: var(--n2-neutral-color);\n    }\n\n  ',document.head.appendChild(o),setInterval((function(){!function(){D.apply(this,arguments)}()}),q)}}function N(){return R.apply(this,arguments)}function R(){return(R=c(r().mark((function n(){var e,t,o;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,indexedDB.databases();case 2:return e=n.sent,t=/^zdb_\d+/,o=null==e?void 0:e.find((function(n){return n.name.match(t)})),n.abrupt("return",o);case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function M(){var n,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Number.isInteger,o=document.title.replace(/^\(\d+\+?\)/,"");e&&((n=t(+e)?+e:e.replace("plus","+"))&&(o="(".concat(n,") ").concat(o)));document.title=o}function D(){return(D=c(r().mark((function n(){var t,o,a,i,s,l,u,d;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("indexedDB"in window){n.next=27;break}if(console.warn("This browser doesn't support IndexedDB"),!(t=document.querySelector(".leftbar-unread.unread-red"))){n.next=25;break}o="fa-num",a=0,i=e(t.classList),n.prev=7,i.s();case 9:if((s=i.n()).done){n.next=16;break}if(!(l=s.value).startsWith(o)){n.next=14;break}return a=l.substring(o.length),n.abrupt("break",16);case 14:n.next=9;break;case 16:n.next=21;break;case 18:n.prev=18,n.t0=n.catch(7),i.e(n.t0);case 21:return n.prev=21,i.f(),n.finish(21);case 24:M(a);case 25:n.next=33;break;case 27:return n.next=29,N();case 29:u=n.sent,(d=indexedDB.open(u.name,u.version)).onsuccess=c(r().mark((function n(){var e,t,o,a;return r().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=d.result,t=e.transaction(["unread_conv"],"readonly"),o=t.objectStore("unread_conv"),(a=o.getAll()).onsuccess=function(n){var e=n.target.result,t=0;Array.isArray(e)&&(t=e.reduce((function(n,e){return n+((null==e?void 0:e.smsUnreadCount)||0)}),0)),M(t)},a.onerror=function(n){console.error("Error when reading conv of zalo: ",n)};case 6:case"end":return n.stop()}}),n)}))),d.onerror=function(n){console.error("Error when reading db of zalo: ",n)};case 33:case"end":return n.stop()}}),n,null,[[7,18,21,24]])})))).apply(this,arguments)}chrome.runtime.onMessage.addListener((function(n,e,t){if("GET_USER_INFO"===n.task){var o={name:(a=document.querySelector(".nav__tabs__zalo.web")).getAttribute("title"),avatarUrl:a.querySelector(".zavatar img").getAttribute("src")};console.log("USER INFO",o),chrome.runtime.sendMessage({task:"USER_INFO",data:o})}var a;if("clickAddContact"===n.task&&function(n,e,t,o,a){var i=document.querySelector('[data-id="btn_Main_AddFrd"]');i?(i.click(),console.log("phone number: ".concat(n),n),function(n,e,t,o,a){var i;i=function(){var i=c(r().mark((function c(i){var s,l;return r().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f(i);case 2:s=document.querySelector('[data-id="txt_Main_AddFrd_Phone"]'),console.log("Bắt đầu fill contact: ",n,s),s?(s.removeAttribute("readonly"),s.removeAttribute("disabled"),s.value=n,l=new Event("change",{bubbles:!0}),s.dispatchEvent(l),d(n,e,t,o,a)):console.error("Không tìm thấy chỗ điền");case 5:case"end":return r.stop()}}),c)})));return function(n){return i.apply(this,arguments)}}(),chrome.storage.local.get(["countryCode"],(function(n){n.countryCode?(console.log("Country code found: "+n.countryCode),i(n.countryCode)):(console.log("No country code found, using default: +86"),i("+86"))}))}(n,e,t,o,a)):console.error("Button not found")}(n.phone,n.message,n.isCheck,n.isKetBan,n.item),"clickInputFriend"===n.task&&function(n,e,t){u.apply(this,arguments)}(n.name,n.message,n.uid),"XOA_CACHE"===n.task&&indexedDB.databases().then((function(n){n.forEach((function(n){indexedDB.deleteDatabase(n.name)})),location.reload()})).catch((function(n){console.error("Error listing databases:",n)})),n.task,"STOP_SHARE"===n.task&&(E=!0,w("data-translate-inner","STR_CANCEL")),"START_SHARE"===n.task){var i=n.data,l=n.tags,m=n.message;!function(){var n=document.getElementById("zl-modal__dialog-body");if(n){var e=n.parentElement.parentElement.parentElement;e&&e.remove()}}(),function(n,e,t){z.apply(this,arguments)}(i,l,m)}if("HUY_CONTENT_SHARE"===n.task&&(document.body.removeEventListener("mouseover",p),document.body.removeEventListener("mouseout",p),document.body.removeEventListener("click",v,!0)),"CHOICE_CONTENT_SHARE"===n.task&&(document.body.addEventListener("mouseover",p),document.body.addEventListener("mouseout",p),document.body.addEventListener("click",v,!0)),"REQUEST_SHOW_MODAL"===n.task){var b=n.isShowModal;console.log("REQUEST_SHOW_MODAL",b),s(!b)}"EXPORT_ALL_VCARD"===n.task&&chrome.storage.local.get(["sh_zlast_uid"],(function(n){var e=localStorage.getItem("sh_zlast_uid");console.log("Last UID:",e),function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result.transaction(["friend"],"readonly").objectStore("friend").getAll();e.onsuccess=function(n){var e=n.target.result;console.log("All Entries:",e),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_VCARD_EXPORT",friends:e})},e.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(e)})),"EXPORT_ALL_FRIENDS"===n.task&&chrome.storage.local.get(["sh_zlast_uid"],(function(n){var e=localStorage.getItem("sh_zlast_uid");console.log("Last UID:",e),function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result,t=e.transaction(["friend"],"readonly"),o=t.objectStore("friend"),r=o.getAll();r.onsuccess=function(n){var a=n.target.result;t=e.transaction(["label"],"readonly"),o=t.objectStore("label"),(r=o.getAll()).onsuccess=function(n){var e=n.target.result,t={};a.forEach((function(n){t[n.userId]=n.userId})),a.forEach((function(n){e.forEach((function(e){e.conversations.some((function(e){return t[e]===n.userId}))&&(n.tag=e.text)}))})),console.log("Mapping",a),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_RECEIVED_EXPORT",friends:a})}},r.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(e)})),"GET_ALL_FRIENDS"===n.task&&chrome.storage.local.get(["sh_zlast_uid"],(function(e){var t=localStorage.getItem("sh_zlast_uid"),o=n.option;console.log("Last UID:",t),console.log("data-option:",o),function(n,e){"1"==e?function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result,t=e.transaction(["friend"],"readonly"),o=t.objectStore("friend"),r=o.getAll();r.onsuccess=function(n){var r=n.target.result;r=r.filter((function(n){return!(0===n.isValid||1===n.isBlocked||0!==n.accountStatus)})),t=e.transaction(["label"],"readonly"),(o=t.objectStore("label")).getAll().onsuccess=function(n){var e=n.target.result,t={};r.forEach((function(n){t[n.userId]=n.userId})),r.forEach((function(n){n.tag="Không có nhãn"})),e.forEach((function(n){r.forEach((function(e){n.conversations.some((function(n){return t[n]===e.userId}))&&(e.tag=n.text)}))})),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_RECEIVED",friends:r})}},r.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(n):"2"==e?function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result,t=e.transaction(["friend"],"readonly"),o=t.objectStore("friend"),r=o.getAll();r.onsuccess=function(n){var a=n.target.result;a=a.filter((function(n){return!(0===n.isValid||1===n.isBlocked||0!==n.accountStatus)})),t=e.transaction(["label"],"readonly"),(o=t.objectStore("label")).getAll().onsuccess=function(n){var c=n.target.result,i={};a.forEach((function(n){i[n.userId]=n.userId})),a.forEach((function(n){n.tag="Không có nhãn"})),c.forEach((function(n){a.forEach((function(e){n.conversations.some((function(n){return i[n]===e.userId}))&&(e.tag=n.text)}))})),t=e.transaction(["group"],"readonly"),o=t.objectStore("group"),(r=o.getAll()).onsuccess=function(n){var e=n.target.result;e.forEach((function(n){n.tag="NHÓM VÀ CỘNG ĐỒNG"})),e.forEach((function(n){a.push(n)})),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_RECEIVED",friends:a})}}},r.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(n):"3"==e?function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result,t=e.transaction(["friend"],"readonly"),o=t.objectStore("friend"),r=o.getAll();r.onsuccess=function(n){var a=n.target.result;a=a.filter((function(n){return!(0===n.isValid||1===n.isBlocked||0!==n.accountStatus)})),t=e.transaction(["label"],"readonly"),(o=t.objectStore("label")).getAll().onsuccess=function(n){var c=n.target.result,i={};a.forEach((function(n){i[n.userId]=n.userId})),a.forEach((function(n){n.tag="Không có nhãn"})),c.forEach((function(n){a.forEach((function(e){n.conversations.some((function(n){return i[n]===e.userId}))&&(e.tag=n.text)}))})),a.length=0,t=e.transaction(["group"],"readonly"),o=t.objectStore("group"),(r=o.getAll()).onsuccess=function(n){var e=n.target.result;e.forEach((function(n){n.tag="NHÓM VÀ CỘNG ĐỒNG"})),e.forEach((function(n){a.push(n)})),chrome.runtime.sendMessage({task:"DATA_LIST_FRIEND_RECEIVED",friends:a})}}},r.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(n):"4"==e?C(n,"1"):"5"==e&&C(n,"0")}(t,o)})),"GET_ALL_TAG"===n.task&&chrome.storage.local.get(["sh_zlast_uid"],(function(n){!function(n){var e=indexedDB.open("zdb_".concat(n));e.onsuccess=function(n){var e=n.target.result,t=e.transaction(["friend"],"readonly"),o=t.objectStore("friend"),r=o.getAll();r.onsuccess=function(n){var r=n.target.result;r=r.filter((function(n){return!(0===n.isValid||1===n.isBlocked||0!==n.accountStatus)})),t=e.transaction(["label"],"readonly"),(o=t.objectStore("label")).getAll().onsuccess=function(n){var e=n.target.result,t={};r.forEach((function(n){t[n.userId]=n.userId})),r.forEach((function(n){n.tag="Không có nhãn"})),e.forEach((function(n){r.forEach((function(e){n.conversations.some((function(n){return t[n]===e.userId}))&&(e.tag=n.text)}))})),chrome.runtime.sendMessage({task:"DATA_LIST_TAGS",friends:r})}},r.onerror=function(n){console.error("Error reading all entries:",n)}},e.onerror=function(n){console.error("Error opening database:",n)}}(localStorage.getItem("sh_zlast_uid"))}))})),chrome.storage.sync.get(["running"],L);var O="n2-custome-zalo-theme",q=3e3;chrome.storage.onChanged.addListener((function(n){for(var e in n){var t=n[e];"running"===e&&L({running:t.newValue})}}))})();